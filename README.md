# Tictac_Gallery

Tictac Gallery 是面向专业摄影师的大容量安卓相册原型与规划文档。该仓库目前用于记录产品规格、数据结构、交互状态和未来实现细节，后续会扩展为完整的 Android 工程。

## 目标定位

- 面向摄影师的超大容量图库（可达 500GB 以上），强调索引、缩略图与快速筛选。
- 类 Windows 文件管理器的多级分组体验，支持自由组合、嵌套、排序与导出布局。
- 工作区（Workspace）提供灵活的跨相册整理体验，同时保持主相册区域独立浏览。

## 核心功能需求

### 1. 索引与缩略图

- 针对海量照片与视频构建索引数据库，包含文件路径、时间戳、EXIF、格式、大小等。
- 后台批量生成多尺寸缩略图，支持快速滚动预览与不同网格密度切换。
- 缩略图缓存策略：LRU + 分级缓存（内存 / 本地磁盘）。

### 2. 多级相册分组

- 相册可组合成组，组内包含相册或其他组，形成树状层级。
- 最大嵌套深度 10 级（可配置）。
- 初次导入时根据系统文件目录生成默认树状结构。
- 用户可重排顺序、重新分组、拖拽移动。
- 支持导出布局结构文件，方便迁移设备时恢复原布局。

### 3. 动态网格与缩放

- 支持双指缩放：在相册流与照片流中动态调整每行显示数量。
- 参考默认值（可配置）：
  - 手机竖屏：4
  - 手机横屏：5
  - 折叠屏/平板小窗：7
  - 平板竖屏：8
  - 平板横屏：12
- 根据屏幕尺寸与设备密度进行动态调整。

### 4. 相册长按操作区（多选）

- 长按相册进入多选状态，可执行：
  - 加入工作区
  - 移动到其他组
  - 合并成新的组
- 合并逻辑：
  - 选中 1 个相册：创建只包含该相册的组
  - 选中多个相册：创建包含所有选中相册的组
- 组封面为 4 宫格：从前 4 个子相册中取第一张缩略图；不足 4 个时用灰色占位。

### 5. 照片流长按操作区（多选）

- 长按照片进入多选状态，可执行：
  - Android 分享（系统 API）
  - 移动到其他相册
  - 复制到其他相册
  - 删除
  - 复制到剪贴板

### 6. 工作区（Workspace）交互

- 在主区域多选后继续长按已选项，触发光效动画后打开工作区。
- 工作区在屏幕上方（手机竖屏）或左边（手机横屏/平板/折叠屏）展开。
- 工作区内可滑动浏览、打开相册/组逐层查看。
- 主相册区域仍可独立浏览，不受工作区干扰。

### 7. 工作区与主区域协作

- 工作区中的相册/组可拖动加入主区域某个组（弹出移动/复制确认）。
- 工作区中的照片可拖动至主区域的具体相册照片流。
- 规则限制：工作区一次只能处理一种类型（相册/组 或 照片）。

### 8. 多选状态与反选

- 长按后震动进入多选。
- 滑动进入“反选”模式：已选项取消、未选项选中。

### 9. 格式支持

- 图片：jpg, png, gif, raw 等
- 视频：mov, mp4, ts 等

### 10. 多窗口与状态保持

- 支持分屏、旋转、小窗。
- 主区域与工作区状态保持一致，不因分屏或旋转重启。
- 若窗口过小导致工作区隐藏，恢复尺寸后自动显示。

### 11. 视觉与主题

- 支持 Material Design 动态取色。
- 支持自动/手动深色模式。

## 初步数据结构建议

```text
Library
└── Group (id, name, order)
    ├── Group (nested)
    └── Album (id, path, order)
        └── Asset (photo/video)
```

- Library Root 维护用户布局结构。
- Album 关联系统路径与索引表。
- Group 仅存储结构关系与排序信息。

## 后续开发方向

- 建立 Kotlin + Jetpack Compose 项目骨架
- Room 数据库设计与索引/缩略图后台任务
- 文件变更监听（MediaStore + 文件系统）
- 手势缩放与动态网格组件
- 工作区状态管理与拖拽交互

---

> 该 README 作为初始需求与系统架构设计文档，后续会在此基础上逐步细化并迁移至正式代码结构。
